<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S8PE79TKZ1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-S8PE79TKZ1');
</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Don's Blog</title>
    <link rel="stylesheet" href="main-styles.css">
    <link rel="stylesheet" href="blog-styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                FaithBot
            </a>
            <button class="nav-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links">
                <div class="dropdown">
                    <button class="dropdown-toggle" aria-label="Select FaithBot language">
                        <span class="dropdown-label">FaithBot (English)</span>
                        <span class="dropdown-arrow">▼</span>
                    </button>
                    <div class="dropdown-menu">
                        <a href="index.html">English</a>
                        <a href="index.html">Arabic</a>
                        <a href="index.html">Bengali</a>
                        <a href="index.html">Burmese</a>
                        <a href="index.html">Cantonese</a>
                        <a href="index.html">Hindi</a>
                        <a href="index.html">Hokkien</a>
                        <a href="index.html">Indonesian</a>
                        <a href="index.html">Japanese</a>
                        <a href="index.html">Javanese</a>
                        <a href="index.html">Khmer</a>
                        <a href="index.html">Korean</a>
                        <a href="index.html">Lao</a>
                        <a href="index.html">Malay</a>
                        <a href="index.html">Mandarin (Simplified)</a>
                        <a href="index.html">Mandarin (Traditional)</a>
                        <a href="index.html">Mongolian</a>
                        <a href="index.html">Shona</a>
                        <a href="index.html">Thai</a>
                        <a href="index.html">Vietnamese</a>
                    </div>
                </div>
                <a href="engage-lostness.html" class="nav-link">Engage Lostness</a>
                <a href="biblepics.html" class="nav-link">Bible Pics</a>
                <a href="blog.html" class="nav-link active">Don's Blog</a>
            </div>
        </div>
    </nav>
            </a>
        </div>
    </nav>

    <div class="blog-container">
        <div class="blog-header">
            <h1>Don's Blog</h1>
            <p>Thoughts on Innovation, AI, Faith, and Coffee</p>
        </div>

        <div class="blog-content" id="blog-articles">
            <div class="loading">Loading articles...</div>
        </div>
    </div>

    <div class="bmc-footer">
        <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="donbarger" data-color="#FFDD00" data-emoji=""  data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>
    </div>

    <script>
        // Fetch and display Substack articles from RSS feed
        async function loadBlogPosts() {
            const container = document.getElementById('blog-articles');

            try {
                // Use RSS2JSON - faster and more reliable
                const rssUrl = 'https://donbarger.substack.com/feed';
                const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;

                const response = await fetch(apiUrl);
                const data = await response.json();

                console.log('RSS data:', data);

                if (data.status === 'ok' && data.items && data.items.length > 0) {
                    const articles = data.items.map(post => {
                        // Extract thumbnail from multiple sources
                        let thumbnail = post.thumbnail || post.enclosure?.link || '';

                        // Try content field
                        if (!thumbnail && post.content) {
                            const imgMatch = post.content.match(/<img[^>]+src=["']([^"'>]+)["']/i);
                            if (imgMatch && imgMatch[1]) {
                                thumbnail = imgMatch[1];
                            }
                        }

                        // Try description field
                        if (!thumbnail && post.description) {
                            const imgMatch = post.description.match(/<img[^>]+src=["']([^"'>]+)["']/i);
                            if (imgMatch && imgMatch[1]) {
                                thumbnail = imgMatch[1];
                            }
                        }

                        // Clean description
                        const cleanDesc = (post.description || '').replace(/<[^>]*>/g, '').substring(0, 200).trim();

                        console.log('Article:', post.title, 'Image:', thumbnail ? thumbnail : 'None');

                        return {
                            title: post.title,
                            link: post.link || post.guid,
                            pubDate: post.pubDate,
                            description: cleanDesc,
                            thumbnail: thumbnail
                        };
                    });

                    container.innerHTML = '<div class="articles-grid">' +
                        articles.map(post => `
                            <article class="blog-post" onclick="window.open('${post.link}', '_blank')">
                                ${post.thumbnail ? `<img src="${post.thumbnail}" alt="${post.title}" class="post-image" onerror="this.style.display='none';" loading="lazy">` : ''}
                                <div class="post-content">
                                    <h2 class="post-title">${post.title}</h2>
                                    <p class="post-date">${new Date(post.pubDate).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
                                    <p class="post-excerpt">${post.description}${post.description ? '...' : ''}</p>
                                    <div class="read-more-btn">Read Article →</div>
                                </div>
                            </article>
                        `).join('') +
                        '</div>' +
                        '<div class="subscribe-cta">' +
                            '<h3>Want more?</h3>' +
                            '<p>Subscribe to get my latest articles delivered to your inbox</p>' +
                            '<a href="https://donbarger.substack.com" target="_blank" rel="noopener noreferrer" class="subscribe-button">Subscribe on Substack</a>' +
                        '</div>';
                } else {
                    throw new Error('No articles found');
                }
            } catch (error) {
                console.error('Blog loading error:', error);
                container.innerHTML = `
                    <div class="error">
                        <h3>Articles Coming Soon!</h3>
                        <p>I'm working on bringing my articles here. In the meantime, check out my latest writing:</p>
                        <a href="https://donbarger.substack.com" target="_blank" rel="noopener noreferrer" class="subscribe-button">Visit My Substack →</a>
                    </div>
                `;
            }
        }

        loadBlogPosts();
    </script>
    <script>
        // Dropdown functionality
        document.addEventListener('DOMContentLoaded', function() {
            const dropdowns = document.querySelectorAll('.dropdown');

            dropdowns.forEach(dropdown => {
                const toggle = dropdown.querySelector('.dropdown-toggle');
                const menu = dropdown.querySelector('.dropdown-menu');

                toggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    dropdown.classList.toggle('active');

                    // Close other dropdowns
                    dropdowns.forEach(otherDropdown => {
                        if (otherDropdown !== dropdown) {
                            otherDropdown.classList.remove('active');
                        }
                    });
                });
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', function() {
                dropdowns.forEach(dropdown => {
                    dropdown.classList.remove('active');
                });
            });
        });

        // Mobile menu toggle
        const navToggle = document.querySelector('.nav-toggle');
        const navLinks = document.querySelector('.nav-links');

        navToggle.addEventListener('click', () => {
            navToggle.classList.toggle('active');
            navLinks.classList.toggle('active');
        });

        // Close menu when clicking a link
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                navToggle.classList.remove('active');
                navLinks.classList.remove('active');
            });
        });
    </script>
</body>
</html>
